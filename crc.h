/*
 * crc.h
 *
 * Created: 18.10.2013 12:11:23
 *  Author: vmk
 */

#ifndef CRC_H_
#define CRC_H_
//***************************************************************************************
// calc_crc
//***************************************************************************************
unsigned int calc_crc(int crc, unsigned int data)
{
	const int gpoly = 0x107; // generator polynomial
	int a; //index variable
	for (a=15;a>=0;a--)
	{
		crc <<= 1; //shift left
		crc |= (int) ((data & (1<<a))>>a);
		if (crc & 0x100) crc ^= gpoly; // XOR of with generator polynomial when MSB(9) = HIGH
	}
	return crc;
};
//***************************************************************************************
//***************************************************************************************
//***************************************************************************************
#endif /* CRC_H_ */
